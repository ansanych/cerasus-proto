syntax = "proto3";
import "cerasus.proto";

package cerasus;

option go_package = "github.com/ansanych/cerasus-proto";

service Brands {
    rpc Ping (PingRequest) returns (PingReply) {}
    rpc GetCerasusBrandData (Auth) returns (Brand) {}
    rpc GetBProducts(BProductsRequest) returns (BProductsReply) {}
    rpc GetBProduct(BIDRequest) returns (BProduct) {}
    rpc CreateBProducts(BProductCreateRequest) returns (BProductCreateReply) {}
    rpc UpdateBProducts(BProductCreateRequest) returns (BoolReply) {}
    rpc GetBPrices(Auth) returns (BProductPrices) {}
    rpc GetBPrice(BIDRequest) returns (BProductPrice) {}
    rpc SetBPrice(BProductCreatePrice) returns (BProductPrice) {}
    rpc GetBSellers(Auth) returns (BSellers) {}
    rpc GetBSeller(BIDRequest) returns (BSeller) {}
    rpc CreateBSeller(BSellerCreateRequest) returns (BSeller) {}
    rpc UpdateBSeller(BSellerCreateRequest) returns (BoolReply) {}
    rpc UploadBFile(BUploadRequest) returns (ImageReply) {}
    rpc GetBFile(BFileRequest) returns (ImageReply) {}
    rpc GetBrandLink (BrandLinkRequest) returns (BBrandLink) {}
    rpc GetSellerLinked (BIDRequest) returns (CompanyesListReply) {}
    rpc GetSellerCompanyProducts(BSCProductsRequest) returns (BSCProductsReply) {}
}

message BProductPrices {
    repeated BProductPrice prices = 1;
}

message BProductCreatePrice {
    Auth auth = 1;
    int64 price = 2;
    int64 productID = 3;
}

message BProduct {
    int64 ID = 1;
    int64 companyID = 2;
    string title = 3;
    string comment = 4;
    string article = 5;
    bool active = 6;
    string updated = 7;
    string preview = 8;
    BProductPrice price = 9;
}

message BProductsRequest {
    Auth auth = 1;
    int64 page = 2;
}

message BIDRequest {
    Auth auth = 1;
    int64 ID = 2;
}

message BProductsReply {
    repeated BProduct products = 1;
    Pagination pagination = 2;
}

message BProductCreateReply {
    BProduct product = 1;
}

message BProductCreateRequest {
    Auth auth = 1;
    BProduct product = 2;
}

message BProductFile {
    int64 ID = 1;
    string file = 2;
    string type = 3;
    bool active = 4;
    string updated = 5;
}

message BSeller {
    int64 ID = 1;
    string name = 2;
    string comment = 3;
    string person = 4;
    string phone = 5;
    string email = 6;
    repeated Company companiesLink = 7;
}

message BSellerCreateRequest {
    Auth auth = 1;
    BSeller seller = 2;
}

message BSellers {
    repeated BSeller sellers = 1;
}

message BBrandLink {
    int64 ID = 1;
    Brand brand = 2;
}

message BrandLinkRequest {
    int64 ID = 1;
}

message BUploadRequest {
    Auth auth = 1;
    int64 productID = 2;
    bytes chunk = 3;
    bool preview = 4;
    string filename = 5;
    string type = 6;
}

message BFileRequest {
    string filename = 1;
    int64 product = 2;
    bool preview = 3;
}

message BSellerLinks {
    repeated Company companies = 1;
}

message BSCProductsRequest {
    Auth auth = 1;
    int64 sellerID = 2;
    int64 companyID = 3;
}

message BSCProduct {
    Product product = 1;
    repeated int64 links = 2;
}

message BSCProductsReply {
    repeated BSCProduct products = 1;
}